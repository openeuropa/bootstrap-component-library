{% spaceless %}

{#
  Parameters:
  - "id" (string) (default: '')
  - "label" (string) (default: '')
  - "disabled" (boolean) (default: false)
  - "invalid" (boolean) (default: false)
  - "required" (boolean) (default: false)
  - "readonly" (boolean) (default: false)
  - "rows" (int) (default: 4)
  - "helper_text" (string) (default: '')
  - "helper_text_id" (string) (default: '')
  - "hidden_label" (boolean) (default: false)
  - "floating" (boolean) (default: false)
  - "horizontal" (boolean) (default: false)
  - "horizontal_class" (string) (default: col-sm-10)
  - "size" (string) (default: '')
#}

{% set _id = id|default('') %}
{% set _size = size|default('') %}
{% set _label = label|default('') %}
{% set _required = required|default(false) %}
{% set _disabled = disabled|default(false) %}
{% set _readonly = readonly|default(false) %}
{% set _invalid = invalid|default(false) %}
{% set _floating = floating|default(false) %}
{% set _helper_text = helper_text|default('') %}
{% set _helper_text_id = helper_text_id|default('') %}
{% set _hidden_label = hidden_label|default(false) %}
{% set _horizontal = horizontal|default(false) %}
{% set _horizontal_class = horizontal_class|default('col-sm-10') %}
{% set _horizontal_label_class = horizontal_label_class|default('col-sm-2') %}
{% set _label_block = false %}
{% set _label_class = 'form-label' %}
{% set _class = 'form-control' %}

{% set _rows = rows|default('4') %}
{% if _size is not empty %}
  {% set _class = _class ~ " form-control-" ~ size %}
{% endif %}
{% if _invalid is not empty %}
  {% set _class = _class ~ " is-invalid" %}
{% endif %}
{% set _placeholder = placeholder|default('') %}
{% if _horizontal %}
  {% set _label_class = 'col-form-label ' ~ _horizontal_label_class %}
{% endif %}
{% if _hidden_label %}
  {% set _label_class = _label_class ~ ' visually-hidden' %}
{% endif %}

{% if _floating or _horizontal %}
{% set _wrapper_class = _floating ? 'form-floating' : 'row' %}
<div class="{{ _wrapper_class }}">
{% endif %}
{% if _label is not empty %}
  {% set _label_block %}
    <label
    {% if _id %}
      for="{{ _id|e('html_attr') }}"
    {% endif %}
      class="{{ _label_class }}"
    >
      {{- label -}}
    </label>
  {% endset %}
{% endif %}

{% if _label_block and _floating == false %}
  {{ _label_block|raw }}
{% endif %}
{% if _horizontal and floating == false %}
<div class="{{ _horizontal_class }}">
{% endif %}
  <textarea
    class="{{ _class }}"
  {% if _id %}
    id="{{ _id }}"
  {% endif %}
  {% if _required %}
    required
  {% endif %}
  {% if _disabled %}
    disabled
  {% endif %}
  {% if _readonly %}
    readonly
  {% endif %}
    rows="{{ _rows }}"
  {% if _placeholder is not empty %}
    placeholder="{{ _placeholder }}"
  {% endif %}
  {% if _helper_text_id is not empty %}
    aria-describedby="{{ _helper_text_id }}"
  {% endif %}
  >
  </textarea>
{% if _horizontal and floating == false %}
</div>
{% endif %}
{% if _label_block and _floating %}
  {{ _label_block|raw }}
{% endif %}
{% if _helper_text is not empty %}
  <div
    class="form-text"
  {%- if _helper_text_id is not empty -%}
    id="{{ _helper_text_id }}"
  {%- endif -%}>
    {{- _helper_text -}}
  </div>
{% endif %}
{% if _floating or _horizontal %}
</div>
{% endif %}
{% endspaceless %}
